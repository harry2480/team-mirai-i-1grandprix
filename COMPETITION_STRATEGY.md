# 🎯 コンペ向け戦略ドキュメント

## 評価軸と対応実装

### 1. **インサイトの質** (最重要・40%)

#### 実装内容
- ✅ **Phase 2: Two-Pass Approach**
  - 予備分析で仮説を自動生成 → データドリブンな論点設定
  - `--auto-hypotheses` フラグで有効化
  
- ✅ **Chain of Thought（思考の連鎖）**
  - 5ステップの構造化された分析プロセス
  - 発言者の立場特定 → 感情分析 → エビデンス収集 → 判定 → 新インサイト発見

- ✅ **多角的視点**
  - 賛成/反対、期待/懸念をバランスよく抽出
  - 「部分的支持（partial）」判定で微妙な意見も反映

#### アピールポイント
> 「事前設計された仮説ではなく、データ自身に語らせる設計により、テンプレート的分析を超えた深いインサイトを抽出しています」

---

### 2. **読みやすさ** (30%)

#### 実装内容
- ✅ **構造化Markdown出力**
  - エグゼクティブサマリー（冒頭）
  - 仮説ごとのセクション分割
  - 判定・信頼度の明示

- ✅ **引用による裏付け**
  - 全ての主張にSession ID + 発言内容を付記
  - 読者が元データを追跡可能

#### アピールポイント
> 「政策立案者が意思決定に直接使える形式を採用。エビデンスベースの議論を促進します」

---

### 3. **正確性** (20%)

#### 実装内容
- ✅ **引用強制プロンプト**
  - "全ての主張には必ずSession ID付きの引用を含めること"
  - "ハルシネーション（存在しない発言の捏造）は厳禁"
  
- ✅ **信頼度スコア**
  - エビデンスの質と量に基づく定量評価（85%等）
  - insufficient_data 判定で無理な推論を回避

#### アピールポイント
> 「プロンプトレベルでハルシネーション対策を徹底。政策検討という高精度が要求される場面に耐える設計です」

---

### 4. **技術的優位性（エンジニアリング評価）** (10%)

#### 実装内容
- ✅ **テーマ非依存アーキテクチャ**
  - 設定ファイル追加のみで新テーマに対応
  - ハードコード排除

- ✅ **TypeScript + 型安全性**
  - 保守性・可読性の向上
  - チーム開発での拡張性

- ✅ **Gemini 2.0 Flash Exp 活用**
  - 長文脈（100万トークン）対応
  - コスト効率と速度のバランス

#### アピールポイント
> 「中間発表・最終発表でテーマが変わっても、設定ファイル1つで即座に対応可能。継続的改善が可能な設計思想」

---

## デモシナリオ（発表用）

### シナリオ1: 基本的な分析実行

```powershell
# 人工知能基本計画の分析
npm run analyze -- ai-plan-test
```

**見せ場**:
- CSV読み込み → フィルタリング → 分析 → レポート生成の自動化
- 生成されたMarkdownレポートの構造美

### シナリオ2: 自動仮説生成の威力

```powershell
# 船荷証券の仮説を自動生成
npm run analyze -- bill-of-lading --generate-only
```

**見せ場**:
- わずか5セッションのサンプルから、的確な仮説7個を抽出
- 人間が見落とした「BCP対応」「法的有効性」等の論点も自動発見

### シナリオ3: 汎用性のアピール

```powershell
# 3つの異なるテーマを連続実行
npm run analyze -- ai-plan-test
npm run analyze -- bill-of-lading
npm run analyze -- marumie-shikin-user
```

**見せ場**:
- 同一のエンジンで全く異なるテーマを処理
- コード変更ゼロでの適用

---

## 想定される質問と回答

### Q1: 「なぜGemini 2.0 Flash Expを選んだのか？」

**A**: 
- 100万トークンの長文脈対応により、全セッションを一度に処理可能
- Flash版のため応答速度が速く、コストも抑えられる
- OpenAI GPT-4と比較し、日本語処理精度も高い

### Q2: 「自動仮説生成は本当に有効なのか？」

**A**: 
- サンプル実行で検証済み。人間が設計した仮説と遜色ない質を達成
- むしろ、人間のバイアス（例: 技術者視点に偏る）を排除できる利点
- 時間制約のあるコンペにおいて、迅速な適応力が評価される

### Q3: 「ハルシネーション対策は十分か？」

**A**: 
- プロンプトで「引用強制」「Session ID必須」を明記
- システム指示で「捏造禁止」を徹底
- 加えて、信頼度スコアで不確実性を可視化

---

## 最終チェックリスト

### 中間発表前

- [ ] `.env` にGemini API Keyを設定
- [ ] 3テーマすべてで分析実行成功を確認
- [ ] レポートの読みやすさを第三者レビュー
- [ ] 自動仮説生成のデモ練習

### 最終発表前

- [ ] 新テーマ（議員定数等）の仮説定義ファイルを作成
- [ ] プロンプトの微調整（フィードバック反映）
- [ ] エラーハンドリングの強化
- [ ] パフォーマンス測定（実行時間、トークン数）

---

## 追加開発アイデア（時間があれば）

### 優先度: 高

1. **バッチ処理**
   - セッション数が多い場合、自動分割して複数回LLM呼び出し
   - 結果を統合してレポート生成

2. **仮説の動的優先度調整**
   - エビデンスが多い仮説ほど詳細に分析
   - データ不足の仮説は自動スキップ

### 優先度: 中

3. **比較レポート機能**
   - 複数テーマの結果を横並びで比較
   - 例: 「人工知能基本計画」vs「船荷証券電子化」の国民意識の違い

4. **WebUI（オプション）**
   - Streamlit等で簡易的なダッシュボード
   - デモで視覚的インパクト

---

## まとめ: コンペで勝つために

1. **技術力のアピール**: 汎用設計・型安全性・自動化
2. **分析の深さ**: Chain of Thought + 自動仮説生成
3. **実用性**: 政策立案者が実際に使える形式
4. **再現性**: 誰でも実行できるドキュメント整備

**我々の強み = エンジニアリング × AI × 政策理解の三位一体**
